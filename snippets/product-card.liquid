{% comment %}
  VOIDBLOOM PRODUCT CARD
  Memory artifact display component with trauma-responsive encoding

  Usage:
  {% render 'product-card', product: product %}
{% endcomment %}

{% assign trauma_level = product.metafields.voidbloom.trauma_level | default: 0 %}
{% assign memory_phase = product.metafields.voidbloom.memory_phase | default: "cyber-lotus" %}

<div class="product-card">
  <a href="{{ product.url | within: collection }}" class="product-card__link">
    <div class="product-card__image-container">
      {%- if product.featured_media != blank -%}
        {% render 'responsive-image',
          image: product.featured_media.preview_image,
          sizes: "(min-width: 768px) 50vw, 100vw",
          class: "product-card__image"
        %}
      {%- else -%}
        {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg product-card__image' }}
      {%- endif -%}

      {%- if product.compare_at_price > product.price -%}
        <span class="product-card__badge">{{ 'products.product.on_sale' | t }}</span>
      {%- endif -%}
    </div>

    <div class="product-card__info">
      <h3 class="product-card__title">{{ product.title }}</h3>
      <div class="product-card__price">
        {%- render 'price', product: product -%}
      </div>
    </div>
  </a>
</div>
