{% comment %}
  VoidBloom Homepage Section
  @MutationCompatible: VoidBloom
  @StrategyProfile: quantum-entangled
  @Version: 1.0.0

  Main homepage layout for the VoidBloom theme
{% endcomment %}

<section
  class="voidbloom-homepage"
  data-section-id="{{ section.id }}"
  data-section-type="voidbloom-homepage">

  <div class="quantum-layer" data-quantum-layer data-trauma-pattern="{{ section.settings.default_trauma_pattern | default: 'recursion' }}" data-intensity="{{ section.settings.default_intensity | default: '50' }}">
    <div class="quantum-layer__grid"></div>
    <div class="quantum-layer__particles"></div>
    <div class="quantum-layer__glitch"></div>
  </div>

  {% if section.settings.show_hero %}
    <div class="voidbloom-homepage__hero">
      <div class="voidbloom-homepage__hero-background">
        {% if section.settings.hero_image != blank %}
          <div class="voidbloom-homepage__hero-image">
            <img
              srcset="{% if section.settings.hero_image.width >= 375 %}{{ section.settings.hero_image | image_url: width: 375 }} 375w,{% endif %}
                {% if section.settings.hero_image.width >= 750 %}{{ section.settings.hero_image | image_url: width: 750 }} 750w,{% endif %}
                {% if section.settings.hero_image.width >= 1100 %}{{ section.settings.hero_image | image_url: width: 1100 }} 1100w,{% endif %}
                {% if section.settings.hero_image.width >= 1500 %}{{ section.settings.hero_image | image_url: width: 1500 }} 1500w,{% endif %}
                {% if section.settings.hero_image.width >= 2200 %}{{ section.settings.hero_image | image_url: width: 2200 }} 2200w,{% endif %}
                {% if section.settings.hero_image.width >= 3000 %}{{ section.settings.hero_image | image_url: width: 3000 }} 3000w,{% endif %}"
              sizes="(min-width: 750px) calc(100vw - 22rem), 100vw"
              src="{{ section.settings.hero_image | image_url: width: 1500 }}"
              loading="eager"
              fetchpriority="high"
              width="{{ section.settings.hero_image.width }}"
              height="{{ section.settings.hero_image.height }}"
              alt="{{ section.settings.hero_image.alt | escape }}"
              class="voidbloom-homepage__hero-image-element"
            >
            <div class="voidbloom-homepage__hero-overlay"></div>
          </div>
        {% else %}
          <div class="voidbloom-homepage__hero-placeholder">
            <div class="voidbloom-homepage__hero-placeholder-content">
              {{ 'image' | placeholder_svg_tag: 'voidbloom-homepage__hero-placeholder-svg' }}
            </div>
          </div>
        {% endif %}
      </div>

      <div class="voidbloom-homepage__hero-content">
        <div class="voidbloom-homepage__hero-text-container">
          {% if section.settings.hero_title != blank %}
            <h1 class="voidbloom-homepage__hero-title">{{ section.settings.hero_title }}</h1>
          {% endif %}

          {% if section.settings.hero_subtitle != blank %}
            <h2 class="voidbloom-homepage__hero-subtitle">{{ section.settings.hero_subtitle }}</h2>
          {% endif %}

          {% if section.settings.hero_button_text != blank and section.settings.hero_button_link != blank %}
            <div class="voidbloom-homepage__hero-button-container">
              <a href="{{ section.settings.hero_button_link }}" class="voidbloom-homepage__hero-button">
                {{ section.settings.hero_button_text }}
              </a>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  {% endif %}

  {% if section.settings.show_featured_collection and section.settings.featured_collection != blank %}
    <div class="voidbloom-homepage__featured-collection">
      <div class="voidbloom-homepage__section-header">
        <h2 class="voidbloom-homepage__section-title">{{ section.settings.featured_collection_title | default: collections[section.settings.featured_collection].title }}</h2>

        {% if section.settings.featured_collection_description != blank %}
          <div class="voidbloom-homepage__section-description">
            {{ section.settings.featured_collection_description }}
          </div>
        {% endif %}
      </div>

      <div class="voidbloom-homepage__product-grid">
        {%- liquid
          assign collection = collections[section.settings.featured_collection]
          assign products_to_display = section.settings.products_to_display | default: 4
        -%}

        {% for product in collection.products limit: products_to_display %}
          <div class="voidbloom-homepage__product-card">
            <a href="{{ product.url }}" class="voidbloom-homepage__product-link">
              <div class="voidbloom-homepage__product-image-container">
                {% if product.featured_image != blank %}
                  <img
                    srcset="{% if product.featured_image.width >= 165 %}{{ product.featured_image | image_url: width: 165 }} 165w,{% endif %}
                      {% if product.featured_image.width >= 360 %}{{ product.featured_image | image_url: width: 360 }} 360w,{% endif %}
                      {% if product.featured_image.width >= 533 %}{{ product.featured_image | image_url: width: 533 }} 533w,{% endif %}
                      {% if product.featured_image.width >= 720 %}{{ product.featured_image | image_url: width: 720 }} 720w,{% endif %}
                      {% if product.featured_image.width >= 940 %}{{ product.featured_image | image_url: width: 940 }} 940w,{% endif %}
                      {% if product.featured_image.width >= 1066 %}{{ product.featured_image | image_url: width: 1066 }} 1066w,{% endif %}"
                    src="{{ product.featured_image | image_url: width: 533 }}"
                    sizes="(min-width: 1100px) calc((100vw - 10rem) / 4), (min-width: 750px) calc((100vw - 11.5rem) / 3), calc(100vw - 4rem)"
                    loading="lazy"
                    width="{{ product.featured_image.width }}"
                    height="{{ product.featured_image.height }}"
                    alt="{{ product.featured_image.alt | escape }}"
                    class="voidbloom-homepage__product-image"
                  >
                {% else %}
                  {{ 'product-1' | placeholder_svg_tag: 'voidbloom-homepage__product-image placeholder' }}
                {% endif %}

                {% if section.settings.show_quantum_overlay and product.metafields.voidbloom.trauma_pattern %}
                  <div class="voidbloom-homepage__product-overlay trauma-{{ product.metafields.voidbloom.trauma_pattern }}"></div>
                {% endif %}
              </div>

              <div class="voidbloom-homepage__product-info">
                <h3 class="voidbloom-homepage__product-title">{{ product.title }}</h3>

                <div class="voidbloom-homepage__product-price">
                  {% if product.price_varies %}
                    <span class="voidbloom-homepage__product-price-from">{{ 'products.product.from_price_html' | t }}</span>
                  {% endif %}
                  <span class="voidbloom-homepage__product-current-price">{{ product.price | money }}</span>

                  {% if product.compare_at_price > product.price %}
                    <span class="voidbloom-homepage__product-compare-price">{{ product.compare_at_price | money }}</span>
                  {% endif %}
                </div>

                {% if product.metafields.voidbloom.trauma_pattern %}
                  <div class="voidbloom-homepage__product-trauma">
                    <span class="voidbloom-homepage__product-trauma-label">Trauma Pattern:</span>
                    <span class="voidbloom-homepage__product-trauma-value">{{ product.metafields.voidbloom.trauma_pattern | capitalize }}</span>
                  </div>
                {% endif %}
              </div>
            </a>
          </div>
        {% else %}
          {% for i in (1..4) %}
            <div class="voidbloom-homepage__product-card placeholder">
              <div class="voidbloom-homepage__product-image-container">
                {{ 'product-' | append: i | placeholder_svg_tag: 'voidbloom-homepage__product-image placeholder' }}
              </div>

              <div class="voidbloom-homepage__product-info">
                <h3 class="voidbloom-homepage__product-title placeholder-text">{{ 'products.product.product_title' | t }}</h3>
                <div class="voidbloom-homepage__product-price">
                  <span class="voidbloom-homepage__product-current-price placeholder-text">{{ 1999 | money }}</span>
                </div>
              </div>
            </div>
          {% endfor %}
        {% endfor %}
      </div>

      {% if section.settings.show_view_all and collection.products_count > products_to_display %}
        <div class="voidbloom-homepage__view-all">
          <a href="{{ collection.url }}" class="voidbloom-homepage__view-all-link">
            {{ 'collections.general.view_all' | t }}
          </a>
        </div>
      {% endif %}
    </div>
  {% endif %}

  {% if section.blocks.size > 0 %}
    <div class="voidbloom-homepage__ritual-sections">
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'image_text' %}
            <div class="voidbloom-homepage__ritual-section" {{ block.shopify_attributes }}>
              <div class="voidbloom-homepage__ritual-content {% if block.settings.image_position == 'right' %}voidbloom-homepage__ritual-content--reverse{% endif %}">
                <div class="voidbloom-homepage__ritual-image-container">
                  {% if block.settings.image != blank %}
                    <img
                      srcset="{% if block.settings.image.width >= 375 %}{{ block.settings.image | image_url: width: 375 }} 375w,{% endif %}
                        {% if block.settings.image.width >= 750 %}{{ block.settings.image | image_url: width: 750 }} 750w,{% endif %}
                        {% if block.settings.image.width >= 1100 %}{{ block.settings.image | image_url: width: 1100 }} 1100w,{% endif %}
                        {% if block.settings.image.width >= 1500 %}{{ block.settings.image | image_url: width: 1500 }} 1500w,{% endif %}"
                      src="{{ block.settings.image | image_url: width: 750 }}"
                      sizes="(min-width: 750px) 50vw, 100vw"
                      loading="lazy"
                      width="{{ block.settings.image.width }}"
                      height="{{ block.settings.image.height }}"
                      alt="{{ block.settings.image.alt | escape }}"
                      class="voidbloom-homepage__ritual-image"
                    >
                  {% else %}
                    {{ 'image' | placeholder_svg_tag: 'voidbloom-homepage__ritual-image placeholder' }}
                  {% endif %}

                  {% if block.settings.show_quantum_effect %}
                    <div class="voidbloom-homepage__ritual-image-effect"></div>
                  {% endif %}
                </div>

                <div class="voidbloom-homepage__ritual-text">
                  {% if block.settings.title != blank %}
                    <h2 class="voidbloom-homepage__ritual-title">{{ block.settings.title }}</h2>
                  {% endif %}

                  {% if block.settings.text != blank %}
                    <div class="voidbloom-homepage__ritual-description">
                      {{ block.settings.text }}
                    </div>
                  {% endif %}

                  {% if block.settings.button_label != blank and block.settings.button_link != blank %}
                    <div class="voidbloom-homepage__ritual-button-container">
                      <a href="{{ block.settings.button_link }}" class="voidbloom-homepage__ritual-button">
                        {{ block.settings.button_label }}
                      </a>
                    </div>
                  {% endif %}
                </div>
              </div>
            </div>

          {% when 'video' %}
            <div class="voidbloom-homepage__ritual-video" {{ block.shopify_attributes }}>
              <div class="voidbloom-homepage__section-header">
                {% if block.settings.title != blank %}
                  <h2 class="voidbloom-homepage__section-title">{{ block.settings.title }}</h2>
                {% endif %}

                {% if block.settings.text != blank %}
                  <div class="voidbloom-homepage__section-description">
                    {{ block.settings.text }}
                  </div>
                {% endif %}
              </div>

              <div class="voidbloom-homepage__video-container">
                {% if block.settings.video_url != blank %}
                  <div class="voidbloom-homepage__video-wrapper">
                    {% if block.settings.video_url.type == 'youtube' %}
                      <iframe
                        src="https://www.youtube.com/embed/{{ block.settings.video_url.id }}?enablejsapi=1&rel=0&autoplay=0"
                        frameborder="0"
                        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen
                        class="voidbloom-homepage__video"
                      ></iframe>
                    {% else %}
                      <iframe
                        src="https://player.vimeo.com/video/{{ block.settings.video_url.id }}"
                        frameborder="0"
                        allow="autoplay; fullscreen"
                        allowfullscreen
                        class="voidbloom-homepage__video"
                      ></iframe>
                    {% endif %}
                  </div>
                {% else %}
                  <div class="voidbloom-homepage__video-placeholder">
                    {{ 'lifestyle-1' | placeholder_svg_tag: 'voidbloom-homepage__video-placeholder-svg' }}
                    <div class="voidbloom-homepage__video-placeholder-icon">
                      <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
                        <path d="M8 5v14l11-7z"/>
                      </svg>
                    </div>
                  </div>
                {% endif %}

                {% if block.settings.show_quantum_effect %}
                  <div class="voidbloom-homepage__video-effect"></div>
                {% endif %}
              </div>
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  {% endif %}

  {% if section.settings.show_newsletter %}
    <div class="voidbloom-homepage__newsletter">
      <div class="voidbloom-homepage__newsletter-content">
        <div class="voidbloom-homepage__newsletter-text">
          {% if section.settings.newsletter_title != blank %}
            <h2 class="voidbloom-homepage__newsletter-title">{{ section.settings.newsletter_title }}</h2>
          {% endif %}

          {% if section.settings.newsletter_text != blank %}
            <div class="voidbloom-homepage__newsletter-description">
              {{ section.settings.newsletter_text }}
            </div>
          {% endif %}
        </div>

        <div class="voidbloom-homepage__newsletter-form">
          {%- form 'customer', id: 'newsletter-form' -%}
            <input type="hidden" name="contact[tags]" value="newsletter">

            <div class="voidbloom-homepage__newsletter-field-container">
              <div class="voidbloom-homepage__newsletter-field">
                <input
                  id="newsletter-email"
                  type="email"
                  name="contact[email]"
                  class="voidbloom-homepage__newsletter-input"
                  value="{{ form.email }}"
                  placeholder="{{ 'general.newsletter_form.email_placeholder' | t }}"
                  required
                >
                <label for="newsletter-email" class="voidbloom-homepage__newsletter-label">{{ 'general.newsletter_form.email_placeholder' | t }}</label>
              </div>

              <div class="voidbloom-homepage__newsletter-button-container">
                <button type="submit" class="voidbloom-homepage__newsletter-button">
                  {{ 'general.newsletter_form.submit' | t }}
                </button>
              </div>
            </div>

            {%- if form.posted_successfully? -%}
              <div class="voidbloom-homepage__newsletter-success" aria-live="polite">
                {{ 'general.newsletter_form.success' | t }}
              </div>
            {%- endif -%}

            {%- if form.errors -%}
              <div class="voidbloom-homepage__newsletter-error" aria-live="polite">
                {{ form.errors.messages['email'] }}
              </div>
            {%- endif -%}
          {%- endform -%}
        </div>
      </div>
    </div>
  {% endif %}
</section>

<style>
  .voidbloom-homepage {
    padding: 0;
    color: var(--vb-color-foreground);
  }

  /* Hero Section */
  .voidbloom-homepage__hero {
    position: relative;
    height: 70vh;
    min-height: 500px;
    max-height: 800px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .voidbloom-homepage__hero-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .voidbloom-homepage__hero-image {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .voidbloom-homepage__hero-image-element {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .voidbloom-homepage__hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0, 26, 51, 0.4), rgba(0, 26, 51, 0.8));
  }

  .voidbloom-homepage__hero-content {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: var(--vb-space-8);
    max-width: 800px;
  }

  .voidbloom-homepage__hero-title {
    font-size: var(--vb-font-size-4xl);
    margin-bottom: var(--vb-space-4);
    color: var(--vb-color-foreground);
    text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
  }

  .voidbloom-homepage__hero-subtitle {
    font-size: var(--vb-font-size-xl);
    margin-bottom: var(--vb-space-8);
    color: var(--vb-color-foreground);
    opacity: 0.9;
  }

  .voidbloom-homepage__hero-button {
    display: inline-block;
    padding: var(--vb-space-3) var(--vb-space-6);
    background-color: var(--vb-color-primary);
    color: var(--vb-color-background);
    border-radius: var(--vb-radius-md);
    font-weight: var(--vb-font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--vb-animation-normal) ease;
    border: 1px solid var(--vb-color-primary);
  }

  .voidbloom-homepage__hero-button:hover {
    background-color: transparent;
    color: var(--vb-color-primary);
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 255, 255, 0.3);
  }

  /* Featured Collection */
  .voidbloom-homepage__featured-collection {
    padding: var(--vb-space-16) var(--vb-space-4);
    max-width: 1440px;
    margin: 0 auto;
  }

  .voidbloom-homepage__section-header {
    text-align: center;
    margin-bottom: var(--vb-space-8);
  }

  .voidbloom-homepage__section-title {
    font-size: var(--vb-font-size-3xl);
    margin-bottom: var(--vb-space-4);
    color: var(--vb-color-foreground);
  }

  .voidbloom-homepage__section-description {
    max-width: 800px;
    margin: 0 auto;
    color: var(--vb-color-foreground);
    opacity: 0.8;
  }

  .voidbloom-homepage__product-grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    gap: var(--vb-space-6);
    margin-bottom: var(--vb-space-8);
  }

  @media (min-width: 750px) {
    .voidbloom-homepage__product-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 990px) {
    .voidbloom-homepage__product-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .voidbloom-homepage__product-card {
    position: relative;
    transition: transform var(--vb-animation-normal) ease;
  }

  .voidbloom-homepage__product-card:hover {
    transform: translateY(-5px);
  }

  .voidbloom-homepage__product-link {
    display: block;
    color: var(--vb-color-foreground);
    text-decoration: none;
  }

  .voidbloom-homepage__product-image-container {
    position: relative;
    margin-bottom: var(--vb-space-3);
    overflow: hidden;
    border-radius: var(--vb-radius-md);
    aspect-ratio: 1 / 1.2;
  }

  .voidbloom-homepage__product-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--vb-animation-normal) ease;
  }

  .voidbloom-homepage__product-link:hover .voidbloom-homepage__product-image {
    transform: scale(1.05);
  }

  .voidbloom-homepage__product-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    mix-blend-mode: screen;
    opacity: 0.3;
    transition: opacity var(--vb-animation-normal) ease;
  }

  .voidbloom-homepage__product-link:hover .voidbloom-homepage__product-overlay {
    opacity: 0.5;
  }

  .trauma-fragmentation.voidbloom-homepage__product-overlay {
    background: linear-gradient(45deg, transparent, rgba(0, 255, 255, 0.5), transparent);
    animation: overlay-fragmentation 10s linear infinite;
  }

  .trauma-recursion.voidbloom-homepage__product-overlay {
    background: repeating-conic-gradient(rgba(0, 255, 255, 0.2) 0%, transparent 5%, transparent 45%, rgba(0, 255, 255, 0.2) 50%);
    background-size: 100% 100%;
  }

  .trauma-abandonment.voidbloom-homepage__product-overlay {
    background: radial-gradient(circle, transparent 50%, rgba(0, 255, 255, 0.3) 100%);
  }

  .trauma-surveillance.voidbloom-homepage__product-overlay {
    background: linear-gradient(transparent 0%, transparent 10%, rgba(0, 255, 255, 0.1) 10.5%, transparent 11%, transparent);
    background-size: 100% 20px;
  }

  .trauma-displacement.voidbloom-homepage__product-overlay {
    background: linear-gradient(45deg, rgba(0, 255, 255, 0.1), transparent);
  }

  .trauma-dissolution.voidbloom-homepage__product-overlay {
    background: radial-gradient(circle at 30% 70%, rgba(0, 255, 255, 0.2), transparent 70%);
  }

  @keyframes overlay-fragmentation {
    0% {
      background-position: -100% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  .voidbloom-homepage__product-info {
    padding: var(--vb-space-2);
  }

  .voidbloom-homepage__product-title {
    font-size: var(--vb-font-size-base);
    margin-bottom: var(--vb-space-2);
    font-weight: var(--vb-font-weight-medium);
    color: var(--vb-color-foreground);
  }

  .voidbloom-homepage__product-price {
    margin-bottom: var(--vb-space-2);
    display: flex;
    align-items: center;
    gap: var(--vb-space-2);
  }

  .voidbloom-homepage__product-current-price {
    font-weight: var(--vb-font-weight-bold);
    color: var(--vb-color-foreground);
  }

  .voidbloom-homepage__product-compare-price {
    text-decoration: line-through;
    opacity: 0.7;
    font-size: var(--vb-font-size-sm);
  }

  .voidbloom-homepage__product-trauma {
    font-size: var(--vb-font-size-sm);
    color: var(--vb-color-accent);
  }

  .voidbloom-homepage__product-trauma-label {
    opacity: 0.8;
    margin-right: var(--vb-space-1);
  }

  .voidbloom-homepage__view-all {
    text-align: center;
  }

  .voidbloom-homepage__view-all-link {
    display: inline-block;
    padding: var(--vb-space-3) var(--vb-space-6);
    background-color: transparent;
    color: var(--vb-color-primary);
    border: 1px solid var(--vb-color-primary);
    border-radius: var(--vb-radius-md);
    font-weight: var(--vb-font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--vb-animation-normal) ease;
  }

  .voidbloom-homepage__view-all-link:hover {
    background-color: var(--vb-color-primary);
    color: var(--vb-color-background);
  }

  /* Ritual Sections */
  .voidbloom-homepage__ritual-sections {
    padding: var(--vb-space-16) 0;
  }

  .voidbloom-homepage__ritual-section {
    padding: var(--vb-space-12) var(--vb-space-4);
    max-width: 1440px;
    margin: 0 auto;
  }

  .voidbloom-homepage__ritual-content {
    display: flex;
    flex-direction: column;
    gap: var(--vb-space-8);
  }

  @media (min-width: 750px) {
    .voidbloom-homepage__ritual-content {
      flex-direction: row;
      align-items: center;
    }

    .voidbloom-homepage__ritual-content--reverse {
      flex-direction: row-reverse;
    }

    .voidbloom-homepage__ritual-image-container,
    .voidbloom-homepage__ritual-text {
      flex: 1;
    }
  }

  .voidbloom-homepage__ritual-image-container {
    position: relative;
    overflow: hidden;
    border-radius: var(--vb-radius-lg);
    aspect-ratio: 16 / 9;
    background-color: rgba(0, 255, 255, 0.05);
  }

  .voidbloom-homepage__ritual-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--vb-animation-slow) ease;
  }

  .voidbloom-homepage__ritual-image-container:hover .voidbloom-homepage__ritual-image {
    transform: scale(1.05);
  }

  .voidbloom-homepage__ritual-image-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, transparent, rgba(0, 255, 255, 0.1), transparent);
    mix-blend-mode: screen;
    animation: ritual-image-effect 15s linear infinite;
  }

  @keyframes ritual-image-effect {
    0% {
      background-position: -100% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  .voidbloom-homepage__ritual-text {
    padding: var(--vb-space-4);
  }

  .voidbloom-homepage__ritual-title {
    font-size: var(--vb-font-size-2xl);
    margin-bottom: var(--vb-space-4);
    color: var(--vb-color-foreground);
  }

  .voidbloom-homepage__ritual-description {
    margin-bottom: var(--vb-space-6);
    color: var(--vb-color-foreground);
    opacity: 0.8;
  }

  .voidbloom-homepage__ritual-button {
    display: inline-block;
    padding: var(--vb-space-3) var(--vb-space-6);
    background-color: transparent;
    color: var(--vb-color-primary);
    border: 1px solid var(--vb-color-primary);
    border-radius: var(--vb-radius-md);
    font-weight: var(--vb-font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--vb-animation-normal) ease;
  }

  .voidbloom-homepage__ritual-button:hover {
    background-color: var(--vb-color-primary);
    color: var(--vb-color-background);
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 255, 255, 0.3);
  }

  /* Video Section */
  .voidbloom-homepage__ritual-video {
    padding: var(--vb-space-12) var(--vb-space-4);
    max-width: 1440px;
    margin: 0 auto;
  }

  .voidbloom-homepage__video-container {
    position: relative;
    margin-top: var(--vb-space-8);
    border-radius: var(--vb-radius-lg);
    overflow: hidden;
    background-color: rgba(0, 255, 255, 0.05);
  }

  .voidbloom-homepage__video-wrapper {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
  }

  .voidbloom-homepage__video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .voidbloom-homepage__video-placeholder {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    background-color: rgba(0, 255, 255, 0.05);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .voidbloom-homepage__video-placeholder-svg {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0.3;
  }

  .voidbloom-homepage__video-placeholder-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background-color: rgba(0, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .voidbloom-homepage__video-placeholder-icon svg {
    width: 40px;
    height: 40px;
    fill: var(--vb-color-foreground);
  }

  .voidbloom-homepage__video-effect {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, transparent, rgba(0, 255, 255, 0.1), transparent);
    mix-blend-mode: screen;
    pointer-events: none;
  }

  /* Newsletter */
  .voidbloom-homepage__newsletter {
    padding: var(--vb-space-16) var(--vb-space-4);
    background-color: rgba(0, 255, 255, 0.03);
    border-top: 1px solid rgba(0, 255, 255, 0.1);
    border-bottom: 1px solid rgba(0, 255, 255, 0.1);
  }

  .voidbloom-homepage__newsletter-content {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: var(--vb-space-8);
    text-align: center;
  }

  @media (min-width: 750px) {
    .voidbloom-homepage__newsletter-content {
      flex-direction: row;
      text-align: left;
      align-items: center;
    }

    .voidbloom-homepage__newsletter-text,
    .voidbloom-homepage__newsletter-form {
      flex: 1;
    }
  }

  .voidbloom-homepage__newsletter-title {
    font-size: var(--vb-font-size-2xl);
    margin-bottom: var(--vb-space-4);
    color: var(--vb-color-foreground);
  }

  .voidbloom-homepage__newsletter-description {
    color: var(--vb-color-foreground);
    opacity: 0.8;
  }

  .voidbloom-homepage__newsletter-field-container {
    display: flex;
    flex-direction: column;
    gap: var(--vb-space-3);
    max-width: 100%;
  }

  @media (min-width: 560px) {
    .voidbloom-homepage__newsletter-field-container {
      flex-direction: row;
    }

    .voidbloom-homepage__newsletter-field {
      flex: 1;
    }
  }

  .voidbloom-homepage__newsletter-field {
    position: relative;
  }

  .voidbloom-homepage__newsletter-input {
    width: 100%;
    padding: var(--vb-space-3) var(--vb-space-4);
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(0, 255, 255, 0.3);
    border-radius: var(--vb-radius-md);
    color: var(--vb-color-foreground);
    transition: border-color var(--vb-animation-fast) ease;
  }

  .voidbloom-homepage__newsletter-input:focus {
    outline: none;
    border-color: var(--vb-color-primary);
    box-shadow: 0 0 0 2px rgba(0, 255, 255, 0.3);
  }

  .voidbloom-homepage__newsletter-label {
    position: absolute;
    top: 0;
    left: var(--vb-space-4);
    transform: translateY(-50%);
    padding: 0 var(--vb-space-1);
    background-color: var(--vb-color-background);
    color: var(--vb-color-primary);
    font-size: var(--vb-font-size-sm);
  }

  .voidbloom-homepage__newsletter-button {
    padding: var(--vb-space-3) var(--vb-space-6);
    background-color: var(--vb-color-primary);
    color: var(--vb-color-background);
    border: 1px solid var(--vb-color-primary);
    border-radius: var(--vb-radius-md);
    font-weight: var(--vb-font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: all var(--vb-animation-normal) ease;
    cursor: pointer;
    width: 100%;
  }

  @media (min-width: 560px) {
    .voidbloom-homepage__newsletter-button {
      width: auto;
    }
  }

  .voidbloom-homepage__newsletter-button:hover {
    background-color: transparent;
    color: var(--vb-color-primary);
  }

  .voidbloom-homepage__newsletter-success {
    margin-top: var(--vb-space-3);
    color: var(--vb-color-success);
    font-size: var(--vb-font-size-sm);
  }

  .voidbloom-homepage__newsletter-error {
    margin-top: var(--vb-space-3);
    color: var(--vb-color-error);
    font-size: var(--vb-font-size-sm);
  }

  /* Placeholder styles */
  .placeholder-text {
    display: inline-block;
    background-color: rgba(255, 255, 255, 0.1);
    animation: placeholder-shimmer 1.5s infinite;
    border-radius: var(--vb-radius-sm);
  }

  @keyframes placeholder-shimmer {
    0% {
      opacity: 0.5;
    }
    50% {
      opacity: 0.8;
    }
    100% {
      opacity: 0.5;
    }
  }

  /* Quantum Layer Styles */
  .quantum-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }

  .quantum-layer__grid {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
    background-size: 50px 50px;
    transform: perspective(500px) rotateX(60deg) scale(1.5);
    transform-origin: center top;
    opacity: 0.2;
    transition: transform 0.5s ease;
  }

  .quantum-layer__particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: radial-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 2px);
    background-size: 30px 30px;
    opacity: 0.2;
    transition: opacity 0.5s ease;
  }

  .quantum-layer__glitch {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, transparent, rgba(0, 255, 255, 0.1), transparent);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .quantum-layer--transitioning .quantum-layer__glitch {
    opacity: 0.3;
    animation: glitch-animation 0.5s linear 1;
  }

  @keyframes glitch-animation {
    0% {
      transform: translate(0);
    }
    20% {
      transform: translate(-5px, 5px);
    }
    40% {
      transform: translate(5px, -5px);
    }
    60% {
      transform: translate(-3px, -2px);
    }
    80% {
      transform: translate(3px, 2px);
    }
    100% {
      transform: translate(0);
    }
  }

  /* Trauma pattern modifiers */
  [data-trauma-pattern="recursion"] .quantum-layer__grid {
    background-size: 40px 40px;
    animation: grid-pulse 10s infinite alternate;
  }

  [data-trauma-pattern="fragmentation"] .quantum-layer__grid {
    background-size: 20px 20px;
    background-image: linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                      linear-gradient(45deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px),
                      linear-gradient(135deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
  }

  [data-trauma-pattern="abandonment"] .quantum-layer__particles {
    background-size: 50px 50px;
    animation: fade-pulse 8s infinite alternate;
  }

  [data-trauma-pattern="surveillance"] .quantum-layer__grid {
    background-image: linear-gradient(rgba(0, 255, 255, 0.05) 1px, transparent 1px),
                      linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 10px);
    background-size: 100px 40px;
  }

  [data-trauma-pattern="dissolution"] .quantum-layer__particles {
    background-image: radial-gradient(rgba(0, 255, 255, 0.15) 1px, transparent 6px);
    background-size: 60px 60px;
    animation: dissolve-animation 15s infinite linear;
  }

  [data-trauma-pattern="displacement"] .quantum-layer__grid {
    transform: perspective(500px) rotateX(70deg) rotateZ(15deg) scale(1.5);
  }

  @keyframes grid-pulse {
    0% {
      opacity: 0.1;
    }
    100% {
      opacity: 0.3;
    }
  }

  @keyframes fade-pulse {
    0% {
      opacity: 0.1;
    }
    100% {
      opacity: 0.25;
    }
  }

  @keyframes dissolve-animation {
    0% {
      background-position: 0 0;
    }
    100% {
      background-position: 100px 100px;
    }
  }
</style>

{% javascript %}
  // QUANTUM LAYER JavaScript
  document.addEventListener('DOMContentLoaded', function() {
    const quantumLayer = document.querySelector('[data-quantum-layer]');
    if (quantumLayer) {
      // Initialize trauma pattern
      const initialTraumaPattern = quantumLayer.getAttribute('data-trauma-pattern');
      const initialIntensity = quantumLayer.getAttribute('data-intensity');

      // Initialize Neural Bus connection if available
      if (window.NeuralBus) {
        // Publish initial state
        NeuralBus.publish('trauma:initialized', {
          type: initialTraumaPattern,
          intensity: initialIntensity
        });

        // Subscribe to trauma pattern changes
        NeuralBus.subscribe('trauma:change', function(data) {
          if (data.type) {
            quantumLayer.setAttribute('data-trauma-pattern', data.type);
          }
          if (data.intensity) {
            quantumLayer.setAttribute('data-intensity', data.intensity);
          }

          // Add a temporary class to trigger animations
          quantumLayer.classList.add('quantum-layer--transitioning');
          setTimeout(function() {
            quantumLayer.classList.remove('quantum-layer--transitioning');
          }, 1000);
        });
      }

      // Respond to scroll events
      window.addEventListener('scroll', function() {
        const scrollPercentage = (window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100;

        // Adjust grid perspective based on scroll
        const gridElement = quantumLayer.querySelector('.quantum-layer__grid');
        if (gridElement) {
          gridElement.style.transform = `perspective(500px) rotateX(${60 + (scrollPercentage * 0.1)}deg) scale(${1.5 + (scrollPercentage * 0.005)})`;
        }

        // Adjust particle opacity based on scroll
        const particlesElement = quantumLayer.querySelector('.quantum-layer__particles');
        if (particlesElement) {
          particlesElement.style.opacity = 0.2 + (scrollPercentage * 0.002);
        }
      });

      // Mouse movement effect
      document.addEventListener('mousemove', function(event) {
        const mouseX = event.clientX / window.innerWidth;
        const mouseY = event.clientY / window.innerHeight;

        // Slight grid movement based on mouse position
        const gridElement = quantumLayer.querySelector('.quantum-layer__grid');
        if (gridElement) {
          gridElement.style.backgroundPosition = `${mouseX * 10}px ${mouseY * 10}px`;
        }

        // Particles follow mouse slightly
        const particlesElement = quantumLayer.querySelector('.quantum-layer__particles');
        if (particlesElement) {
          particlesElement.style.backgroundPosition = `${mouseX * 20}px ${mouseY * 20}px`;
        }
      });

      // Glitch effect on click
      document.addEventListener('click', function() {
        const glitchElement = quantumLayer.querySelector('.quantum-layer__glitch');
        if (glitchElement) {
          glitchElement.style.opacity = '0.3';
          setTimeout(function() {
            glitchElement.style.opacity = '';
          }, 300);
        }
      });
    }
  });

  // Original section JavaScript
  // Handle trauma-specific effects
  if (window.NeuralBus) {
    NeuralBus.subscribe('trauma:activated', function(data) {
      const section = document.querySelector('.voidbloom-homepage');
      if (section) {
        section.setAttribute('data-trauma', data.type);
        section.setAttribute('data-intensity', data.intensity);
      }
    });
  }

  // Apply parallax effect to hero image if available
  const heroSection = document.querySelector('.voidbloom-homepage__hero');
  if (heroSection) {
    window.addEventListener('scroll', function() {
      const scrollPosition = window.scrollY;
      const heroImage = heroSection.querySelector('.voidbloom-homepage__hero-image-element');
      if (heroImage) {
        heroImage.style.transform = `translateY(${scrollPosition * 0.2}px)`;
      }
    });
  }
{% endjavascript %}

{% schema %}
{
  "name": "VoidBloom Homepage",
  "tag": "section",
  "class": "voidbloom-section",
  "settings": [
    {
      "type": "header",
      "content": "Quantum Layer Settings"
    },
    {
      "type": "select",
      "id": "default_trauma_pattern",
      "label": "Default trauma pattern",
      "options": [
        {
          "value": "recursion",
          "label": "Recursion"
        },
        {
          "value": "fragmentation",
          "label": "Fragmentation"
        },
        {
          "value": "abandonment",
          "label": "Abandonment"
        },
        {
          "value": "surveillance",
          "label": "Surveillance"
        },
        {
          "value": "displacement",
          "label": "Displacement"
        },
        {
          "value": "dissolution",
          "label": "Dissolution"
        }
      ],
      "default": "recursion"
    },
    {
      "type": "range",
      "id": "default_intensity",
      "min": 0,
      "max": 100,
      "step": 5,
      "label": "Default intensity",
      "default": 50
    },
    {
      "type": "header",
      "content": "Hero Section"
    },
    {
      "type": "checkbox",
      "id": "show_hero",
      "label": "Show hero section",
      "default": true
    },
    {
      "type": "image_picker",
      "id": "hero_image",
      "label": "Hero image"
    },
    {
      "type": "text",
      "id": "hero_title",
      "label": "Hero title",
      "default": "VoidBloom Memory Archive"
    },
    {
      "type": "text",
      "id": "hero_subtitle",
      "label": "Hero subtitle",
      "default": "Encoded trauma artifacts for the digital age"
    },
    {
      "type": "text",
      "id": "hero_button_text",
      "label": "Button text",
      "default": "Explore Collection"
    },
    {
      "type": "url",
      "id": "hero_button_link",
      "label": "Button link"
    },
    {
      "type": "header",
      "content": "Featured Collection"
    },
    {
      "type": "checkbox",
      "id": "show_featured_collection",
      "label": "Show featured collection",
      "default": true
    },
    {
      "type": "collection",
      "id": "featured_collection",
      "label": "Collection"
    },
    {
      "type": "text",
      "id": "featured_collection_title",
      "label": "Collection title",
      "info": "Leave blank to use collection name"
    },
    {
      "type": "textarea",
      "id": "featured_collection_description",
      "label": "Collection description"
    },
    {
      "type": "range",
      "id": "products_to_display",
      "min": 4,
      "max": 12,
      "step": 4,
      "label": "Products to display",
      "default": 4
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show 'View all' button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_quantum_overlay",
      "label": "Show quantum overlay on products",
      "default": true
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "show_newsletter",
      "label": "Show newsletter signup",
      "default": true
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "Newsletter title",
      "default": "Subscribe to Our Archive"
    },
    {
      "type": "richtext",
      "id": "newsletter_text",
      "label": "Newsletter text",
      "default": "<p>Sign up to receive new release notifications and exclusive access to limited memory artifacts.</p>"
    }
  ],
  "blocks": [
    {
      "type": "image_text",
      "name": "Image with text",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "select",
          "id": "image_position",
          "label": "Image position",
          "options": [
            {
              "value": "left",
              "label": "Left"
            },
            {
              "value": "right",
              "label": "Right"
            }
          ],
          "default": "left"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Memory Ritual Collection"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Each artifact in our collection is encoded with a specific trauma pattern, designed to resonate with the wearer's own experiences and create a unique quantum visualization.</p>"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Learn More"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "checkbox",
          "id": "show_quantum_effect",
          "label": "Show quantum effect overlay",
          "default": true
        }
      ]
    },
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Quantum Visualization"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>Experience the dynamic interaction between memory artifacts and trauma patterns in this visualization.</p>"
        },
        {
          "type": "video_url",
          "id": "video_url",
          "label": "Video URL",
          "accept": [
            "youtube",
            "vimeo"
          ]
        },
        {
          "type": "checkbox",
          "id": "show_quantum_effect",
          "label": "Show quantum effect overlay",
          "default": true
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "VoidBloom Homepage",
      "category": "Custom Content",
      "blocks": [
        {
          "type": "image_text"
        },
        {
          "type": "video"
        }
      ]
    }
  ]
}
{% endschema %}
