/**
 * OBSIDIANBLOOM.CSS
 * Profile-specific styling for the ObsidianBloom theme
 * @MutationCompatible: Active/Dynamic Variants
 * @StrategyProfile: void-resonance
 * @Version: 1.3.0 (WCAG AA Compliance Update)
 */

/* ObsidianBloom Profile Variables */
:root {
  /* Base variables */
  --vb-profile-obsidianbloom-primary: #242424;
  --vb-profile-obsidianbloom-secondary: #363636;
  --vb-profile-obsidianbloom-accent: #b0f;
  --vb-profile-obsidianbloom-background: #080808;
  --vb-profile-obsidianbloom-text: #e6e6e6;
  --vb-profile-obsidianbloom-surface: rgb(8 8 8 / 90%);

  /* Bloom effect variables */
  --vb-obsidianbloom-bloom-spread: 4px;

  /* Trauma-specific variables */
  --vb-trauma-abandonment-color-obsidian: rgb(179 0 64 / 90%);
  --vb-trauma-fragmentation-color-obsidian: rgb(153 0 204 / 90%);
  --vb-trauma-recursion-color-obsidian: rgb(204 136 0 / 90%);
  --vb-trauma-surveillance-color-obsidian: rgb(77 153 102 / 90%);
  --vb-trauma-displacement-color-obsidian: rgb(179 51 64 / 90%);
  --vb-trauma-dissolution-color-obsidian: rgb(153 102 204 / 90%);
}

/* Apply ObsidianBloom profile */
.vb-profile-obsidianbloom,
[data-profile='obsidianbloom'] {
  /* Mapping profile variables to theme variables */
  --vb-color-primary: var(--vb-profile-obsidianbloom-primary);
  --vb-color-secondary: var(--vb-profile-obsidianbloom-secondary);
  --vb-color-accent: var(--vb-profile-obsidianbloom-accent);
  --vb-color-background: var(--vb-profile-obsidianbloom-background);
  --vb-color-foreground: var(--vb-profile-obsidianbloom-text);
  --vb-color-surface: var(--vb-profile-obsidianbloom-surface);

  /* Trauma color overrides */
  --vb-trauma-abandonment-color: var(--vb-trauma-abandonment-color-obsidian);
  --vb-trauma-fragmentation-color: var(--vb-trauma-fragmentation-color-obsidian);
  --vb-trauma-recursion-color: var(--vb-trauma-recursion-color-obsidian);
  --vb-trauma-surveillance-color: var(--vb-trauma-surveillance-color-obsidian);
  --vb-trauma-displacement-color: var(--vb-trauma-displacement-color-obsidian);
  --vb-trauma-dissolution-color: var(--vb-trauma-dissolution-color-obsidian);

  /* Effect intensities */
  --vb-bloom-intensity: 0.5;
  --vb-glow-spread: 4px;
  --vb-glow-intensity: 8px;
  --vb-glitch-intensity: 0.3;
  --vb-quantum-jitter-distance: 1px;
}

/* ObsidianBloom Card Styling */
.vb-obsidianbloom-card {
  background-color: rgb(8 8 8 / 95%);
  border: 1px solid var(--vb-profile-obsidianbloom-secondary);
  border-radius: 4px;
  margin-bottom: 20px;
  overflow: hidden;
  transition: all 0.3s ease;
}

.vb-obsidianbloom-card:hover {
  box-shadow: 0 0 15px rgb(187 0 255 / 20%);
}

.vb-obsidianbloom-card__inner {
  padding: 1.5rem;
}

/* ObsidianBloom Button Styling */
.vb-obsidianbloom-button {
  background-color: var(--vb-profile-obsidianbloom-secondary);
  border-radius: 4px;
  color: var(--vb-profile-obsidianbloom-text);
  cursor: pointer;
  display: inline-block;
  font-size: 0.9rem;
  padding: 0.7rem 1.2rem;
  text-transform: uppercase;
  transition: all 0.3s ease;
}

.vb-obsidianbloom-button:hover {
  background-color: var(--vb-profile-obsidianbloom-accent);
  color: #fff;
}

/* ObsidianBloom Trauma Visualizations */
.vb-profile-obsidianbloom .vb-trauma-card {
  background-color: rgb(8 8 8 / 80%);
  border: 1px solid var(--vb-profile-obsidianbloom-secondary);
  box-shadow: 0 4px 12px rgb(0 0 0 / 25%);
}

.vb-profile-obsidianbloom .vb-trauma-card:hover {
  box-shadow: 0 8px 24px rgb(0 0 0 / 30%), 0 0 8px rgb(187 0 255 / 10%);
}

.vb-profile-obsidianbloom .vb-trauma-card.vb-trauma-abandonment {
  border-color: var(--vb-trauma-abandonment-color-obsidian);
  box-shadow: 0 0 var(--vb-obsidianbloom-bloom-spread) var(--vb-trauma-abandonment-color-obsidian);
}

.vb-profile-obsidianbloom .vb-trauma-card.vb-trauma-fragmentation {
  border-color: var(--vb-trauma-fragmentation-color-obsidian);
  box-shadow: 0 0 var(--vb-obsidianbloom-bloom-spread) var(--vb-trauma-fragmentation-color-obsidian);
}

.vb-profile-obsidianbloom .vb-trauma-card.vb-trauma-recursion {
  border-color: var(--vb-trauma-recursion-color-obsidian);
  box-shadow: 0 0 var(--vb-obsidianbloom-bloom-spread) var(--vb-trauma-recursion-color-obsidian);
}

.vb-profile-obsidianbloom .vb-trauma-card.vb-trauma-surveillance {
  border-color: var(--vb-trauma-surveillance-color-obsidian);
  box-shadow: 0 0 var(--vb-obsidianbloom-bloom-spread) var(--vb-trauma-surveillance-color-obsidian);
}

.vb-profile-obsidianbloom .vb-trauma-card.vb-trauma-displacement {
  border-color: var(--vb-trauma-displacement-color-obsidian);
  box-shadow: 0 0 var(--vb-obsidianbloom-bloom-spread) var(--vb-trauma-displacement-color-obsidian);
}

.vb-profile-obsidianbloom .vb-trauma-card.vb-trauma-dissolution {
  border-color: var(--vb-trauma-dissolution-color-obsidian);
  box-shadow: 0 0 var(--vb-obsidianbloom-bloom-spread) var(--vb-trauma-dissolution-color-obsidian);
}

/* ObsidianBloom Header */
.vb-profile-obsidianbloom .vb-trauma-card__header {
  background-color: rgb(8 8 8 / 90%);
  border-bottom: 1px solid var(--vb-profile-obsidianbloom-accent);
  padding: 1rem;
}

.vb-profile-obsidianbloom .vb-trauma-card__title {
  color: var(--vb-profile-obsidianbloom-accent);
  font-size: 1.2rem;
  margin: 0;
}

/* ObsidianBloom animations */
@keyframes vb-obsidianbloom-pulse {
  0%,
  100% {
    opacity: 60%;
    transform: scale(1);
  }
  50% {
    opacity: 30%;
    transform: scale(1.1);
  }
}

@keyframes vb-obsidianbloom-flicker {
  0%,
  19%,
  21%,
  23%,
  25%,
  54%,
  56%,
  100% {
    opacity: 100%;
  }
  20%,
  24%,
  55% {
    opacity: 50%;
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .vb-obsidianbloom-card__inner {
    padding: 1rem;
  }

  .vb-profile-obsidianbloom .vb-trauma-card__header {
    padding: 0.8rem;
  }
}
