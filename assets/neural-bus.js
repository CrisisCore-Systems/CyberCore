/**
 * NEURAL-BUS.JS
 * Neural communication bus for component interaction
 *
 * @MutationCompatible: All Variants
 * @StrategyProfile: quantum-entangled
 * @Version: 3.1.0
 */
// Generated by CyberCore Neural Forge v3.0.0 //

/**
 * NeuralBus - Core messaging system for VoidBloom theme
 */
window.NeuralBus = {
  initialize: function (config) {
    this.events = {};
    this.components = {};
    this.config = config || {
      traumaEncoding: true,
      debugMode: false,
    };
    console.log('NeuralBus initialized with config:', this.config);
    return this;
  },

  publish: function (eventName, data) {
    if (!this.events[eventName]) return;
    this.events[eventName].forEach((callback) => callback(data));
  },

  subscribe: function (eventName, callback) {
    if (!this.events[eventName]) this.events[eventName] = [];
    this.events[eventName].push(callback);
    return () => this.unsubscribe(eventName, callback);
  },

  unsubscribe: function (eventName, callback) {
    if (!this.events[eventName]) return;
    this.events[eventName] = this.events[eventName].filter((cb) => cb !== callback);
  },

  register: function (componentName, config) {
    this.components[componentName] = {
      config: config,
      timestamp: Date.now(),
      active: true,
    };
    this.publish('component:registered', { name: componentName, config: config });
    return {
      nonce: Date.now().toString(36) + Math.random().toString(36).substr(2, 5),
      timestamp: Date.now(),
    };
  },
};

document.addEventListener('DOMContentLoaded', function () {
  // Initialize with default configuration
  window.NeuralBus.initialize({
    traumaEncoding: true,
    debugMode: false,
    autoConnect: true,
    version: '3.1.0',
  });
});
